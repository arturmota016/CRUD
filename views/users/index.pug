h1 Lista de usuários

form#searchForm(method="GET", action="/users")
  .form-group
    label(for="search") Buscar Usuário:
    input#search.form-control(type="text", name="search", placeholder="Digite o nome do usuário", autocomplete="off")


table.table
    thead
        tr
            th ID
            th Nome
            th Regra
            th Ação

    tbody#userTableBody
        each user in users
            tr
                td #{user.id}
                td #{user.username}
                td #{user.role}
                td
                    a.btn.btn-primary(href=`/users/${user.id}`) View
          a.btn.btn-warning(href=`/users/${user.id}/edit`) Edit
          form(method="POST", action=`/users/${user.id}?_method=DELETE`, style="display: inline;")
            button.btn.btn-danger(type="submit") Delete

script.
  document.getElementById('search').addEventListener('input', function() {
      const searchValue = this.value;

      fetch(`/users/search?search=${encodeURIComponent(searchValue)}`)
          .then(response => response.json())
          .then(data => {
              const tbody = document.getElementById('userTableBody');
              tbody.innerHTML = '';

              data.users.forEach(user => {
                  const tr = document.createElement('tr');
                  tr.innerHTML = `
                      <td>${user.id}</td>
                      <td>${user.username}</td>
                      <td>${user.role}</td>
                      <td>
                          <a href="/users/${user.id}" class="btn btn-primary">View</a>
                          <a href="/users/${user.id}/edit" class="btn btn-warning">Edit</a>
                          <form action="/users/${user.id}?_method=DELETE" method="POST" style="display: inline;">
                              <button type="submit" class="btn btn-danger">Delete</button>
                          </form>
                      </td>
                  `;
                  tbody.appendChild(tr);
              });
          })
          .catch(error => console.error('Error:', error));
  });